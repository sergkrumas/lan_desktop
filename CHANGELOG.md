
### 1й раунд разработки (август 2023 - 13 февраля 2024)
- добавлен чат из примеров Qt, который я портировал на PyQt. В процессе пришлось отказаться от QCBORStreamWriter и QCBORStreamReader и воспользоваться модулем cbor2, так как питоновская обёртка QCBORStreamWriter не видит некоторых Qt-шных методов объекта, а питоновская обёртка QCBORStreamReader не даёт прочитать записанную строку через PyQt в принципе, выдавая ошибку питоновской обёртки - SystemError: sipBuildResult(): invalid format string "NF". Модуль cbor2 работает так же просто как и модуль json.
    - на основе этого чата будет разрабатываться LAN-DESKTOP
    - помимо отправки сообщений в пределах локальной сети чат умеет искать пиров и сообщает об их подключении как только так сразу

### 2й раунд разработки, версия 0.90 (13 февраля 2024 - 30 марта 2024)
- теперь интерфейс задаётся полностью кодом. Между текстом чата и списком пиров добавлен сплиттер, который можно перемещать мышкой
- (21 мар 24) успешно осуществлена передача скриншота с Linux Mint на виртуальной машине в Windows 10 на физической машине. Работает и в случае двух копий на одной машине, тогда в одном из чатов придётся включать флалок `Send Screenshot`. Полученный скриншот сохраняется в папке приложения с именем f'{time.time()}'.jpg и пока ещё не отображается в самой приложухе. Решена проблема долгой передачи картинки: метод чтения читал слишком мало данных
- (21 мар 24) полученный скриншот теперь выводится в окне, окно отображается сразу при получении скриншота
- (25 мар 24) изменил струтуру передачи по TCP (по UDP передача осталась прежней)
    - раньше было так:
        - 4 байта для размера сообщения (big-endian)
        - тело соообщения (cbor2 binary)
    - теперь будет так:
        - 4 байта для совокупного размера serial-сообщения и binary-сообщения (big-endian)
        - 4 байта для размера serial-сообщения (big-endian)
        - 4 байта для размера binary-сообщения (big-endian)
        - тело serial-сообщения (cbor2 binary)
        - тело binary-сообщения (attached binary)
- (25 мар 24) чекбокс «Send Screenshot» переименован в «Allow Remote Control». Его активация даёт возможность извне управлять компьютером, на котором запущено приложение с активированным чекбоксом. При запуске в Linux чекбокс автоматически активируется. Этот чекбокс существует для целей разработки и в дальнейшем весь UX будет пересмотрен.
- (25 мар 24) теперь ведомое приложение может указать область захвата: все мониторы или только какой-то один. Кастомная область захвата будет добавлена поздней. Вдобавок вместе со скриншотом приходят координаты прямоугольника области захвата
- (26 мар 24) добавил мгновенное закрытие приложения при нажатии клавиши `Escape`
- (26 мар 24) передача событий мышки (левая, правая, колесо)
    - пофиксил расхождение в размерах области захвата и размерах изображения
    - ограничение генерации управляющих данных: курсор должен быть на картинке
    - реализована тестовая передача координат курсора (элементы интерфейса должны менять отрисовку при наведении курсора, например, на объекты на рабочем столе и на часы в трее в Linux Mint). Пока нормального маппинга не реализовано и окно вьюпорта должно иметь одинаковые размеры с область захвата
    - реализован маппинг координат (ведь изображение рисуется без соблюдения масштаба и не всегда в левом верхнем углу, для того чтобы втиснутся в текущие размеры окна)
    - реализована передача инфы о зажатии и отпускании
        - левой кнопки мыши (уже работают перетаскивания)
        - правой кнопки мыши
        - средней кнопки мыши (колесо)
    - реализована передача инфы о вращениях колеса мыши
- (26 мар 24) добавил менюбар ко вьюпорту с командой закрытия приложения
- (26 мар 24) в заголовке вьюпорта отображается адрес удалённого компьютера, управление которым производится
- (26 мар 24) во вьюпорте теперь отображаются нажимаемые и отпускаемые клавиши для целей дебага
- (26 мар 24) написан транслятор данных: Qt-атрибуты событий нажатия клавиш транслируются в аргументы для функций pyautogui
- (26 мар 24) реализована передача инфы о зажатых и отпущенных клавишах клавиатуры
- (26 мар 24) переписал отрисовку вьюпорта так, чтобы менюбар не перекрывал изображение
- (26 мар 24) если не удалось транслировать нажимаемую клавишу в понятный аргумент для функций модуля pyautogui, то по периметру вьюпорта временно появится покраснение
- (26 мар 24) поддеркжа клавиши `Win` для вызова меню «Пуск» (работает даже в Linux)
- (26 мар 24) в менюбар добавлено меню, которое помогает высылать хоткеи из предопределённого набора
    - `Ctrl+Alt+Del`
    - `Ctrl+Break`
    - `Insert`
    - `Print Screen`
    - `Alt+PrintScreen`
    - `Shift+Tab`
- (27 мар 24) отображение лога нажимаемых клавиш теперь можно контролировать в подменю «View» главного меню
- (27 мар 24) заметка: порой становлюсь жертвой забывчивости и забываю перезагружать работающую копию в виртуалке и не могу понять почему ничего не работает
- (27 мар 24) заметка: если в выводе программа пишет, что читает сообщение громадного размера, то значит в программе произошло исключение на каком-то этапе из-за этого читалка CBOR2 сбилась. Надо просто остановить программу и взглянуть на её вывод, который, к слову, несётся очень быстро.
- (27 мар 24) отображение управляющих команд у клиента (появляется в окне слева внизу у панели задач, появляется как только будет принят хоть одно управляющее сообщение)
    - клавиши клавиатуры
    - кнопки мыши (левая, правая, средняя)
    - сочетания клавиш
    - кручение колеса мыши
- (27 мар 24) проверил работу меню из главного меню, которое передаёт сочетания клавиш
- (27 мар 24) поддержка произвольной области захвата
    - добавлена опция в интерфейс
    - создан виджет для задания произвольной области захвата, с помощью мыши можно как изменить его размеры, так и перенести
    - написана функция, которая создаёт скриншот захваченной области
    - реализация логики в интерфейсе
- (27 мар 24) передача файлов в обе стороны
    - код приёма сброшенных файлов на окно чата
    - код отправки файлов
    - код приёма файлов
    - сообщение в чат об отправке каждой части
    - сообщение в чат о получении каждой части
    - сообщение в чат о завершении закачки файла (о получении завершающей части файла)
- (27 мар 24) UX: добавлена галочка для отображения лога нажимаемых клавиш на ведомом компьютере
- (28 мар 24) при завершении перекачки файла порой не удаётся с первой попытки переименовать файл, так как в него ещё записываются данные. В итоге файл оставался непереименованным, теперь это исправлено
- (30 мар 24) добавлены лейблы для отображения генерирующего фреймрейта и принимающего фреймрейта
- (30 мар 24) блокировка вывода текста в консоль (вывод текста в консоль может отжирать фреймрейт, в полтора-два раза)
- (30 мар 24) попытки повысить FPS и снизить задержку кадров
    - таймер отправки скриншотов теперь пытается работать так, чтобы было 25 FPS, но это не всегда возможно
    - отключил дурацкий ping-pong, присутствующий в коде чата изначально. Его отключение помогло убрать ощутимую задержку кадров
    - попробовал задавать размеры входящих и исходящих буферов для сокетов, а также размер специального буфера через QAbstractSocket::setReadBufferSize, но либо это не помогло, либо я не заметил этого, потому что другие параметры были выставлены уже как надо. Хотя в документации сказано, что размер третьего буфера лучше ограничивать, чтобы там ничего долго не копилось.
- (30 мар 24) обнаружен баг: в Linux Mint виджет задания области захвата не даёт кликать сквозь себя, пока не знаю как фиксить, но Linux меня пока особо не интересует
- (30 мар 24) pyautogui выбрасывает исключение, если координаты для функции pyautogui.moveTo выходят за допустимые пределы. Пока засунул вызов этой функции в try_except, но вообще надо проверяь при отравке координаты или просто клампить их
- (30 мар 24) заметка насчёт FPS: если курсор не находится над изображением вьюпорта, то FPS поднимается в два раза. Видимо, обработка сообщений с координатами мыши забирает ресурсы
- (30 мар 24) сохранение списка пиров и сохранение их MAC-адресов
    - нашёл место в программе, из которого можно организовать обмен mac-адресами
    - в файл папки приложения сохраняется список пиров и их mac-адресов при обмене mac-адресами
    - после запуска список заполняется сохранёнными парами IP- и MAC. После отключении пира его запись остаётся в списке с префиксом `[inactive]`. При подключении запись с префиксом `[inactive]` стирается
    - появилась кнопка, благодаря которой можно посылать сигналы WakeOnLan на выключенные компьютеры
- (30 мар 24) если связь потеряна (более двух секунд не приходили обновления), то картинка во вьюпорте конвертируется в чёрнобелую и выводится сообщение о недоступности ведомого компьютера. При восстановлении чёрнобелая картинка и сообщение сгинут
- (30 мар 24) прошёл тестовый прогон на реальных компьютерах: ведущий (Windows 10) и ведомый (Windows 10)
    - работает как предполагалось, разрешение захвата было 2560x1440
- (30 мар 24) успешно протестирована кнопка WakeOnLAN
- (30 мар 24) мощно затупил и забыл написать адекватный маппинг координат из портала для случая, когда происходит захвата со второго монитора или из произвольной области захвата. В итоге косяк исправлен теперь
- (30 мар 24) теперь LAN-DESKTOP почти готов, работает более-менее сносно. Осталось только придать этому всему приемлемый UI и UX, чем я и займусь в апреле

### 3й раунд разработки, версия 0.91 (30 марта 2024 - ???????)
- (2 апр 24) добавлен скрипт для обновления программы прямо из репозитория
- (4 апр 24) обновление из репозитория теперь можно выполнить из главного меню программы
    - добавлена автоматическая перезагрузка после обновления
- (4 апр 24) переработана визуальная основа окна (чат слева, список пиров справа, по центру будет портал)
